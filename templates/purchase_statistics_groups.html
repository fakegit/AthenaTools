
<table class="table table-bordered table-hover">
    <thead>
        <tr>
            <th>组别</th>
            <th>进货数量</th>
            <th>出货数量</th>
            <th>小计</th>
        </tr>
    </thead>
    <tbody>
        {% for line in lines %}
            <tr>
                <td>{{ line.group }}</td>
                <td>
                    {% if line.purchases %}
                        <a href="#" onclick="$(this).next().slideToggle()">{{ line.purchase_count }}</a>
                        <div style="display: none">
                            <table class="table table-bordered">
                                {% for purchase in line.purchases %}
                                    <tr>
                                        <td>{{ purchase.day }}</td>
                                        <td>{{ purchase.title }}</td>
                                        <td>{{ purchase.unit }}</td>
                                        <td>{{ purchase.normal_quantity }}</td>
                                        <td>{{ purchase.vendor }}</td>
                                        <td>{{ purchase.produced_at }}</td>
                                        <td>{{ purchase.exp }}</td>
                                        <td>{{ purchase.supplier }}</td>
                                    </tr>
                                {% endfor %}
                            </table>
                        </div>
                    {% else %}
                        {{ line.purchase_count }}
                    {% endif %}
                </td>
                <td>{{ line.consume_count }}</td>
                <td>{{ line.total_count }}</td>
            </tr>
        {% endfor %}
    </tbody>
</table>


<script>
    $(".modal-title").html('{{ product.title }} | {{ begin }} 至 {{ end }} | 分组小计')
</script>

